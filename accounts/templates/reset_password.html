{% extends 'base.html' %}

{% block content %}

    <div class="container">
        <div class="header">
            <h1><span>ğŸ”„</span>Yeni Åifre Belirle</h1>
            <p>HesabÄ±nÄ±z iÃ§in yeni bir ÅŸifre oluÅŸturun</p>
        </div>
        <div class="content">
            <div class="messages">
                {% for message in messages %}
                    <div class="alert alert-{% if message.tags == 'error' %}error{% else %}success{% endif %}">{{ message|safe }}</div>
                {% endfor %}
            </div>
            <div class="password-rules">
                <h4><span>ğŸ”’</span>GÃ¼venli Åifre KurallarÄ±</h4>
                <ul>
                    <li>En az 6 karakter uzunluÄŸunda olmalÄ±</li>
                    <li>Harfler ve sayÄ±lar iÃ§ermeli</li>
                    <li>Kolay tahmin edilemeyen bir ÅŸifre seÃ§in</li>
                    <li>"123456", "password" gibi basit ÅŸifreler kullanmayÄ±n</li>
                </ul>
            </div>
            <form method="POST">
                {% csrf_token %}
                <div class="form-group">
                    <label for="password"><span>ğŸ”‘</span>Yeni Åifre</label>
                    <input type="password" id="password" name="password" class="form-control" placeholder="Yeni ÅŸifrenizi girin" required minlength="6">
                    <div class="password-strength"><div class="strength-bar" id="strengthBar"></div></div>
                </div>
                <div class="form-group">
                    <label for="confirm_password"><span>âœ“</span>Yeni Åifre (Tekrar)</label>
                    <input type="password" id="confirm_password" name="confirm_password" class="form-control" placeholder="Yeni ÅŸifrenizi tekrar girin" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary"><span>ğŸ’¾</span>Åifreyi DeÄŸiÅŸtir</button>
            </form>
            <div class="links">
                <a href="{% url 'accounts:login' %}"><span>â†¶</span>GiriÅŸ SayfasÄ±na DÃ¶n</a>
                <a href="{% url 'accounts:forgot_password' %}"><span>ğŸ”</span>Tekrar GÃ¶nder</a>
                <a href="{% url 'anasayfa' %}"><span>ğŸ </span>Ana Sayfa</a>
            </div>
        </div>
    </div>
<script>
  const passwordInput=document.getElementById('password');
  const confirmInput=document.getElementById('confirm_password');
  const strengthBar=document.getElementById('strengthBar');

    passwordInput.addEventListener('input',function(){
        const password=this.value;
        let strength=0;
        
        if(password.length>=6)strength+=25;
        if(password.length>=8)strength+=25;
        if(/[A-Z]/.test(password))strength+=25;
        if(/[0-9]/.test(password))strength+=25;
        
        strengthBar.style.width=strength+'%';
        
        if(strength<50){
            strengthBar.style.background='#dc3545';
        }else if(strength<75){
            strengthBar.style.background='#ffc107';
        }else 
            strengthBar.style.background='#28a745';
    }); 
        
    confirmInput.addEventListener('input',function(){
        if(passwordInput.value!==this.value){
            this.style.borderColor='#dc3545';
        }else {
            this.style.borderColor='#28a745';
        }
    });
</script>
<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box
}
body{
    font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px
}
.container{
    width:100%;
    max-width:450px;
    background:white;
    border-radius:15px;
    overflow:hidden;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
}
.header{
    background:linear-gradient(135deg,#17a2b8 0%,#138496 100%);
    color:white;
    padding:30px;
    text-align:center
}
.header h1{
    font-size:28px;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px
}
.header p{
    opacity:.9;
    font-size:16px
}
.content{
    padding:40px
}
.messages{
    margin-bottom:25px
}
.alert{
    padding:12px 20px;
    border-radius:8px;
    margin-bottom:10px;
    font-size:14px;
    border-left:4px solid
}
.alert-success{
    background:#d4edda;
    color:#155724;
    border-color:#c3e6cb
}
.alert-error{
    background:#f8d7da;
    color:#721c24;
    border-color:#f5c6cb
}
.password-rules{
    background:#e7f3ff;
    padding:20px;
    border-radius:10px;
    margin-bottom:25px;
    border-left:4px solid #17a2b8
}
.password-rules h4{
    color:#17a2b8;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    gap:8px
}
.password-rules ul{
    list-style:none;
    padding-left:0
}
.password-rules li{
    margin-bottom:8px;
    padding-left:24px;
    position:relative;
    color:#495057
}
.password-rules li:before{
    content:"âœ“";
    position:absolute;
    left:0;
    color:#17a2b8;
    font-weight:bold
}
.form-group{
    margin-bottom:25px
}
.form-group label{
    display:block;
    margin-bottom:8px;
    color:#284747;
    font-weight:600;
    font-size:14px;
    display:flex;
    align-items:center;
    gap:8px
}
.form-control{
    width:100%;
    padding:14px 18px;
    border:2px solid #e1e5e9;
    border-radius:10px;
    font-size:16px;
    transition:all .3s
}
.form-control:focus{
    outline:none;
    border-color:#17a2b8;
    box-shadow:0 0 0 3px rgba(23,162,184,.1)
}
.btn{
    width:100%;
    padding:16px;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    transition:all .3s;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px
}
.btn-primary{
    background:linear-gradient(135deg,#17a2b8 0%,#138496 100%);
    color:white
}
.btn-primary:hover{
    transform:translateY(-2px);
    box-shadow:0 5px 15px rgba(23,162,184,.3)
}
.links{
    text-align:center;
    margin-top:30px;
    padding-top:20px;
    border-top:1px solid #e1e5e9
}
.links a{
    color:#284747;
    text-decoration:none;
    font-weight:500;
    margin:0 10px;
    padding:8px 15px;
    border-radius:6px;
    transition:all .3s;
    display:inline-flex;
    align-items:center;
    gap:5px
}
.links a:hover{
    background:#f8f9fa;
    color:#3a6b6b
}
.password-strength{
    margin-top:8px;
    height:4px;
    background:#e9ecef;
    border-radius:2px;
    overflow:hidden
}
.strength-bar{
    height:100%;
    width:0%;
    background:#dc3545;
    border-radius:2px
}
@media (max-width:480px){
.content{
    padding:30px 20px
}
.header{
    padding:25px 20px
}
.links a{
    display:block;
    margin:10px 0
}
};
</style>
{% endblock %}