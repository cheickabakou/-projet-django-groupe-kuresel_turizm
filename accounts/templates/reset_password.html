
    {% extends 'base.html' %}
    
    {% block content %}
    <div class="container">
        <div class="header">
            <h1><span>üîÑ</span>Set New Password</h1>
            <p>Create a new password for your account</p>
        </div>
        
        <!-- AFFICHE LES MESSAGES DJANGO -->
        <div class="content">
           {% if messages %}
               <div class="messages">
                   {% for message in messages %}
                      <div class="alert alert-{{ message.tags }}">
                         {{ message }}
                      </div>
                  {% endfor %}
               </div>
          {% endif %}
          <div class="password-rules">
                <h4><span>üîí</span>Secure Password Rules</h4>
                
            </div>
        
         <!-- FORMULAIRE SIMPLIFI√â POUR TEST -->
         <form method="POST" id="passwordForm">
              {% csrf_token %}
              <input type="hidden" name="uidb64" value="{{ uidb64 }}">
              <input type="hidden" name="token" value="{{ token }}">
            
               <div class="form-group">
                  <label for="password">New Password:</label>
                  <input type="password" name="password" id="password" class="form-control" placeholder="Enter your new password" required minlength="6">
                  <div class="password-strength"><div class="strength-bar" id="strengthBar"></div></div>
              </div>
            
               <div class="form-group">
                  <label for="confirm_password">New Password (Confirm):</label>
                 <input type="password" name="confirm_password" id="confirm_password" class="form-control" placeholder="Re-enter your new password" required minlength="6">
              </div>
            
              <button type="submit" onclick="return validateForm()" class="btn btn-primary">
                 Change Password
              </button>
          </form>
        
          <div class="rules-list">
                <ul>
                    <li>Must be at least 6 characters long</li>
                    <li>Must contain letters and numbers</li>
                    <li>Choose a password that is hard to guess</li>
                    <li>Avoid simple passwords like "123456" or "password"</li>
                </ul>
            </div>
            
            <div class="links">
                <a href="{% url 'accounts:login' %}"><span>‚Ü∂</span>Back to Login</a>
                <a href="{% url 'accounts:forgot_password' %}"><span>üîê</span>Resend</a>
                <a href="{% url 'core:anasayfa' %}"><span>üè†</span>Home Page</a>
            </div>
        </div>
    </div>

<script>
    const passwordInput=document.getElementById('password');
    const confirmInput=document.getElementById('confirm_password');
    const strengthBar=document.getElementById('strengthBar');

    passwordInput.addEventListener('input',function(){
        const password=this.value;
        let strength=0;
        
        if(password.length>=6)strength+=25;
        if(password.length>=8)strength+=25;
        if(/[A-Z]/.test(password))strength+=25;
        if(/[0-9]/.test(password))strength+=25;
        
        strengthBar.style.width=strength+'%';
        
        if(strength<50){
            strengthBar.style.background='#dc3545';
       }else if(strength<75){
            strengthBar.style.background='#ffc107';
      }else 
        strengthBar.style.background='#28a745';
    }); 
        
    confirmInput.addEventListener('input',function(){
        if(passwordInput.value!==this.value){
            this.style.borderColor='#dc3545';
       }else {
            this.style.borderColor='#28a745';
       }
    });
    function validateForm() {
        const password = document.getElementById('password').value;
        const confirm = document.getElementById('confirm_password').value;
        
        console.log("Password:", password);
        console.log("Confirm:", confirm);
        
        if (password !== confirm) {
            alert("ERREUR JS: Les mots de passe ne correspondent pas!");
            return false;
        }
        
        if (password.length < 6) {
            alert("ERREUR JS: Mot de passe trop court!");
            return false;
        }
        
        return true;
    }
</script>

 <style>
   *{
    margin:0;
    padding:0;
    box-sizing:border-box
}
body{
    font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px
}
.container{
    width:100%;
    max-width:480px;
    background:white;
    border-radius:15px;
    overflow:hidden;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
}
.header{
    background:linear-gradient(135deg,#17a2b8 0%,#138496 100%);
    color:white;
    padding:30px;
    text-align:center
}
.header h1{
    font-size:28px;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px
}
.header p{
    opacity:.9;
    font-size:16px
}
.content{
    padding:40px
}
.messages{
    margin-bottom:25px
}
.alert{
    padding:12px 20px;
    border-radius:8px;
    margin-bottom:10px;
    font-size:14px;
    border-left:4px solid
}
.alert-success{
    background:#d4edda;
    color:#155724;
    border-color:#c3e6cb
}
.alert-error{
    background:#f8d7da;
    color:#721c24;
    border-color:#f5c6cb
}
.password-rules{
    background:#e7f3ff;
    padding:20px;
    border-radius:10px;
    margin-bottom:25px;
    border-left:4px solid #17a2b8
}
.password-rules h4{
    color:#17a2b8;
    margin-bottom:10px;
    display:flex;
    align-items:center;
    gap:8px
}
.rules-list ul{
    list-style:none;
    padding-left:0
}
.rules-list li{
    margin-bottom:8px;
    padding-left:24px;
    position:relative;
    color:#495057
}
.rules-list li:before{
    content:"‚úì";
    position:absolute;
    left:0;
    color:#17a2b8;
    font-weight:bold
}
.form-group{
    margin-bottom:25px
}
.form-group label{
    display:block;
    margin-bottom:8px;
    color:#284747;
    font-weight:600;
    font-size:14px;
    display:flex;
    align-items:center;
    gap:8px
}
.form-control{
    width:100%;
    padding:14px 18px;
    border:2px solid #e1e5e9;
    border-radius:10px;
    font-size:16px;
    transition:all .3s
}
.form-control:focus{
    outline:none;
    border-color:#17a2b8;
    box-shadow:0 0 0 3px rgba(23,162,184,.1)
}
.btn{
    width:100%;
    padding:16px;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    transition:all .3s;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px
}
.btn-primary{
    background:linear-gradient(135deg,#17a2b8 0%,#138496 100%);
    color:white
}
.btn-primary:hover{
    transform:translateY(-2px);
    box-shadow:0 5px 15px rgba(23,162,184,.3)
}
.links{
    text-align:center;
    margin-top:30px;
    padding-top:20px;
    border-top:1px solid #e1e5e9
}
.links a{
    color:#284747;
    text-decoration:none;
    font-weight:500;
    margin:0 10px;
    padding:8px 15px;
    border-radius:6px;
    transition:all .3s;
    display:inline-flex;
    align-items:center;
    gap:5px
}
.links a:hover{
    background:#f8f9fa;
    color:#3a6b6b
}
.password-strength{
    margin-top:8px;
    height:4px;
    background:#e9ecef;
    border-radius:2px;
    overflow:hidden
}
.strength-bar{
    height:100%;
    width:0%;
    background:#dc3545;
    border-radius:2px
}
@media (max-width:480px){
.content{
    padding:30px 20px
}
.header{
    padding:25px 20px
}
.links a{
    display:block;
    margin:10px 0
}
};
</style>
{% endblock %}